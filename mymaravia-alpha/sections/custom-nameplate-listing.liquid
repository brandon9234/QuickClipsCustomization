{%- comment -%}theme-check-disable SchemaJsonFormat{%- endcomment -%}
{%- liquid
  assign is_empty = false
  if section.settings.title == blank and section.settings.description == blank and section.settings.product_image == blank
    assign is_empty = true
  endif

  assign default_main_asset = 'MayberrySmallNameplate.webp'
  assign default_thumb_asset_1 = 'MayberrySmallNameplate.webp'
  assign default_thumb_asset_2 = 'AcrylicBlockNameplate.webp'
  assign default_thumb_asset_3 = 'DeskNameplate.webp'
-%}

{%- if request.design_mode or section.settings.hide_when_empty == false or is_empty == false -%}
  <div class="color-{{ section.settings.section_color_scheme }} gradient isolate {{ section.settings.line_separator }} {{ section.settings.visibility }}">
    <div class="section__inner page-width {{ section.settings.top_padding }} {{ section.settings.bottom_padding }}">
      <div class="nameplate-listing">
        <div class="nameplate-listing__grid">
          <div class="nameplate-listing__media-wrap">
            <div class="card card--card color-{{ section.settings.card_color_scheme }} gradient{% if section.settings.show_card_shadow %} card--shadow{% endif %}">
              <div class="media media--transparent ratio" style="--ratio-percent: 62.5%;">
                {%- if default_main_asset != blank -%}
                  <img
                    src="{{ default_main_asset | asset_url }}"
                    loading="eager"
                    fetchpriority="high"
                    class="nameplate-listing__image"
                    alt="{{ section.settings.image_alt | escape }}"
                  >
                {%- elsif section.settings.product_image != blank -%}
                  {{
                    section.settings.product_image
                    | image_url: width: 1400
                    | image_tag:
                      loading: 'lazy',
                      widths: '360, 540, 720, 940, 1200, 1400',
                      sizes: '(min-width: 990px) 60vw, 100vw',
                      class: 'nameplate-listing__image',
                      alt: section.settings.image_alt
                  }}
                {%- else -%}
                  {{ 'product-2' | placeholder_svg_tag: 'placeholder-svg nameplate-listing__image' }}
                {%- endif -%}
              </div>
            </div>

            <div class="nameplate-listing__thumbs">
              {%- for thumb in (1..3) -%}
                {%- liquid
                  assign thumb_setting = 'thumb_image_' | append: thumb
                  assign thumb_image = section.settings[thumb_setting]
                  assign fallback_thumb_asset = default_thumb_asset_1
                  if thumb == 2
                    assign fallback_thumb_asset = default_thumb_asset_2
                  elsif thumb == 3
                    assign fallback_thumb_asset = default_thumb_asset_3
                  endif
                -%}
                <div class="nameplate-listing__thumb card card--card color-{{ section.settings.card_color_scheme }} gradient">
                  <div class="media media--transparent ratio" style="--ratio-percent: 62.5%;">
                    {%- if thumb_image != blank -%}
                      {{
                        thumb_image
                        | image_url: width: 400
                        | image_tag:
                          loading: 'lazy',
                          widths: '180, 260, 360, 400',
                          sizes: '(min-width: 990px) 18vw, 30vw',
                          class: 'nameplate-listing__thumb-image',
                          alt: section.settings.image_alt
                      }}
                    {%- else -%}
                      <img
                        src="{{ fallback_thumb_asset | asset_url }}"
                        loading="lazy"
                        class="nameplate-listing__thumb-image"
                        alt="{{ section.settings.image_alt | escape }}"
                      >
                    {%- endif -%}
                  </div>
                </div>
              {%- endfor -%}
            </div>
          </div>

          <div class="nameplate-listing__content card card--card color-{{ section.settings.card_color_scheme }} gradient{% if section.settings.show_card_shadow %} card--shadow{% endif %}">
            {%- if section.settings.badge != blank -%}
              <p class="badge mb-2">{{ section.settings.badge }}</p>
            {%- endif -%}

            {%- if section.settings.title != blank -%}
              <h2 class="h2 mt-0 mb-1">{{ section.settings.title | escape }}</h2>
            {%- endif -%}

            {%- if section.settings.subtitle != blank -%}
              <p class="caption-with-letter-spacing mb-2">{{ section.settings.subtitle | escape }}</p>
            {%- endif -%}

            {%- if section.settings.price != blank -%}
              <p class="h4 mb-2">{{ section.settings.price | escape }}</p>
            {%- endif -%}

            {%- if section.settings.description != blank -%}
              <div class="rte mb-3">{{ section.settings.description }}</div>
            {%- endif -%}

            {%- if section.settings.button_label != blank -%}
              <a
                {% if section.settings.button_link == blank %}
                  role="link" aria-disabled="true"
                {% else %}
                  href="{{ section.settings.button_link }}"
                {% endif %}
                class="button button--primary"
              >
                {{ section.settings.button_label | escape }}
              </a>
            {%- endif -%}
          </div>
        </div>

        {%- if section.blocks.size > 0 -%}
          <div class="nameplate-listing__extras">
            {%- for block in section.blocks -%}
              {%- liquid
                assign fallback_block_asset = default_thumb_asset_3
                if forloop.index == 1
                  assign fallback_block_asset = default_thumb_asset_2
                elsif forloop.index == 2
                  assign fallback_block_asset = default_thumb_asset_3
                endif
              -%}
              <article class="nameplate-listing__extra card card--card color-{{ section.settings.card_color_scheme }} gradient{% if section.settings.show_card_shadow %} card--shadow{% endif %}" {{ block.shopify_attributes }}>
                <div class="media media--transparent ratio" style="--ratio-percent: 62.5%;">
                  {%- if fallback_block_asset != blank -%}
                    <img
                      src="{{ fallback_block_asset | asset_url }}"
                      loading="lazy"
                      class="nameplate-listing__extra-image"
                      alt="{{ block.settings.image_alt | escape }}"
                    >
                  {%- elsif block.settings.product_image != blank -%}
                    {{
                      block.settings.product_image
                      | image_url: width: 900
                      | image_tag:
                        loading: 'lazy',
                        widths: '260, 360, 520, 700, 900',
                        sizes: '(min-width: 990px) 32vw, 100vw',
                        class: 'nameplate-listing__extra-image',
                        alt: block.settings.image_alt
                    }}
                  {%- else -%}
                    {{ 'product-3' | placeholder_svg_tag: 'placeholder-svg nameplate-listing__extra-image' }}
                  {%- endif -%}
                </div>

                <div class="nameplate-listing__extra-content">
                  {%- if block.settings.badge != blank -%}
                    <p class="badge mb-1">{{ block.settings.badge }}</p>
                  {%- endif -%}

                  {%- if block.settings.title != blank -%}
                    <h3 class="h4 mt-0 mb-1">{{ block.settings.title | escape }}</h3>
                  {%- endif -%}

                  {%- if block.settings.subtitle != blank -%}
                    <p class="caption-with-letter-spacing mb-1">{{ block.settings.subtitle | escape }}</p>
                  {%- endif -%}

                  {%- if block.settings.price != blank -%}
                    <p class="h5 mb-2">{{ block.settings.price | escape }}</p>
                  {%- endif -%}

                  {%- if block.settings.description != blank -%}
                    <div class="rte mb-2">{{ block.settings.description }}</div>
                  {%- endif -%}

                  {%- if block.settings.button_label != blank -%}
                    <a
                      {% if block.settings.button_link == blank %}
                        role="link" aria-disabled="true"
                      {% else %}
                        href="{{ block.settings.button_link }}"
                      {% endif %}
                      class="button button--secondary"
                    >
                      {{ block.settings.button_label | escape }}
                    </a>
                  {%- endif -%}

                </div>
              </article>
            {%- endfor -%}
          </div>
        {%- endif -%}
      </div>
    </div>
  </div>
{%- endif -%}

<style>
  #shopify-section-{{ section.id }} .nameplate-listing__grid {
    display: grid;
    gap: 2rem;
    align-items: start;
  }

  #shopify-section-{{ section.id }} .nameplate-listing__content {
    padding: 2rem;
  }

  #shopify-section-{{ section.id }} .nameplate-listing__image,
  #shopify-section-{{ section.id }} .nameplate-listing__thumb-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  #shopify-section-{{ section.id }} .nameplate-listing__thumbs {
    margin-top: 1rem;
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 0.8rem;
  }

  #shopify-section-{{ section.id }} .nameplate-listing__thumb .media {
    border-radius: var(--media-radius);
    overflow: hidden;
  }

  #shopify-section-{{ section.id }} .nameplate-listing__extras {
    margin-top: 2rem;
    display: grid;
    gap: 1.4rem;
    grid-template-columns: 1fr;
  }

  #shopify-section-{{ section.id }} .nameplate-listing__extra-content {
    padding: 1.4rem;
  }

  #shopify-section-{{ section.id }} .nameplate-listing__extra-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  @media screen and (min-width: 990px) {
    #shopify-section-{{ section.id }} .nameplate-listing__grid {
      grid-template-columns: 1.2fr 1fr;
      gap: 2.4rem;
    }

    #shopify-section-{{ section.id }} .nameplate-listing__extras {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }
</style>

{% schema %}
{
  "name": "Custom nameplate listing",
  "tag": "section",
  "class": "section section-custom-nameplate-listing",
  "disabled_on": {
    "groups": ["header", "footer", "aside"]
  },
  "settings": [
    {
      "type": "header",
      "content": "Product content"
    },
    {
      "type": "text",
      "id": "badge",
      "label": "Badge",
      "default": "Personalized gift"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Personalized Acrylic Desk Name Plate - Sunflower Design"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "Custom name + title"
    },
    {
      "type": "text",
      "id": "price",
      "label": "Price",
      "default": "$34.99"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p>A custom clear acrylic desk sign with sunflower artwork, personalized with any name and job title, complete with a wooden stand and gift-ready presentation.</p><ul><li>Personalized with your name and optional title</li><li>Premium clear acrylic plate with vivid floral print</li><li>Solid wood stand included</li><li>Gift-ready packaging included</li></ul>"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button label",
      "default": "Shop now"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button link"
    },
    {
      "type": "header",
      "content": "Images"
    },
    {
      "type": "image_picker",
      "id": "product_image",
      "label": "Main image"
    },
    {
      "type": "text",
      "id": "image_alt",
      "label": "Image alt text",
      "default": "Personalized acrylic desk name plate with sunflower accents"
    },
    {
      "type": "image_picker",
      "id": "thumb_image_1",
      "label": "Thumbnail image 1"
    },
    {
      "type": "image_picker",
      "id": "thumb_image_2",
      "label": "Thumbnail image 2"
    },
    {
      "type": "image_picker",
      "id": "thumb_image_3",
      "label": "Thumbnail image 3"
    },
    {
      "type": "header",
      "content": "Style"
    },
    {
      "type": "color_scheme",
      "id": "section_color_scheme",
      "label": "Section color scheme",
      "default": "scheme-1"
    },
    {
      "type": "color_scheme",
      "id": "card_color_scheme",
      "label": "Card color scheme",
      "default": "scheme-2"
    },
    {
      "type": "checkbox",
      "id": "show_card_shadow",
      "label": "Show card shadow",
      "default": true
    },
    {
      "type": "select",
      "id": "line_separator",
      "options": [
        {
          "value": "",
          "label": "Off"
        },
        {
          "value": "border-top",
          "label": "Top"
        },
        {
          "value": "border-bottom",
          "label": "Bottom"
        },
        {
          "value": "border-top border-bottom",
          "label": "Both"
        }
      ],
      "default": "",
      "label": "Line separator"
    },
    {
      "type": "select",
      "id": "top_padding",
      "options": [
        {
          "value": "pt-0",
          "label": "0"
        },
        {
          "value": "pt-s05",
          "label": "0.5"
        },
        {
          "value": "pt-s",
          "label": "1"
        },
        {
          "value": "pt-s15",
          "label": "1.5"
        },
        {
          "value": "pt-s2",
          "label": "2"
        }
      ],
      "default": "pt-s",
      "label": "Top section spacing"
    },
    {
      "type": "select",
      "id": "bottom_padding",
      "options": [
        {
          "value": "pb-0",
          "label": "0"
        },
        {
          "value": "pb-s05",
          "label": "0.5"
        },
        {
          "value": "pb-s",
          "label": "1"
        },
        {
          "value": "pb-s15",
          "label": "1.5"
        },
        {
          "value": "pb-s2",
          "label": "2"
        }
      ],
      "default": "pb-s",
      "label": "Bottom section spacing"
    },
    {
      "type": "select",
      "id": "visibility",
      "options": [
        {
          "value": "visible-xs",
          "label": "Mobile"
        },
        {
          "value": "hidden-xs",
          "label": "Desktop"
        },
        {
          "value": "",
          "label": "Both"
        }
      ],
      "default": "",
      "label": "Visibility"
    },
    {
      "type": "checkbox",
      "id": "hide_when_empty",
      "label": "Hide this section if all content is empty",
      "default": false
    }
  ],
  "blocks": [
    {
      "type": "product",
      "name": "Additional product",
      "settings": [
        {
          "type": "image_picker",
          "id": "product_image",
          "label": "Product image"
        },
        {
          "type": "text",
          "id": "image_alt",
          "label": "Image alt text",
          "default": "Personalized acrylic desk name plate"
        },
        {
          "type": "text",
          "id": "badge",
          "label": "Badge",
          "default": "New"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Personalized Acrylic Desk Name Plate"
        },
        {
          "type": "text",
          "id": "subtitle",
          "label": "Subtitle",
          "default": "Custom name + title"
        },
        {
          "type": "text",
          "id": "price",
          "label": "Price",
          "default": "$34.99"
        },
        {
          "type": "richtext",
          "id": "description",
          "label": "Description"
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "Button label",
          "default": "Shop now"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button link"
        }
      ]
    }
  ],
  "max_blocks": 6,
  "presets": [
    {
      "name": "Custom nameplate listing",
      "blocks": [
        {
          "type": "product"
        }
      ]
    }
  ]
}
{% endschema %}
